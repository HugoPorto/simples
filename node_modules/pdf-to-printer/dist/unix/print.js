"use strict";

const fs = require("fs");

const execAsync = require("../execAsync");

const getCommand = (pdf, options) => {
  let command = "lp " + pdf;

  if (options.printer) {
    command += " -d " + options.printer;
  }

  return command;
};

const print = (pdf, options = {}) => {
  if (!pdf) throw "No PDF specified";
  if (typeof pdf !== "string") throw "Invalid PDF name";
  if (!fs.existsSync(pdf)) throw "No such file";
  const command = getCommand(pdf, options);
  return execAsync(command);
};

module.exports = print;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bml4L3ByaW50LmpzIl0sIm5hbWVzIjpbImZzIiwicmVxdWlyZSIsImV4ZWNBc3luYyIsImdldENvbW1hbmQiLCJwZGYiLCJvcHRpb25zIiwiY29tbWFuZCIsInByaW50ZXIiLCJwcmludCIsImV4aXN0c1N5bmMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNBLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLGNBQUQsQ0FBekI7O0FBRUEsTUFBTUUsVUFBVSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsT0FBTixLQUFrQjtBQUNuQyxNQUFJQyxPQUFPLEdBQUcsUUFBUUYsR0FBdEI7O0FBQ0EsTUFBSUMsT0FBTyxDQUFDRSxPQUFaLEVBQXFCO0FBQ25CRCxJQUFBQSxPQUFPLElBQUksU0FBU0QsT0FBTyxDQUFDRSxPQUE1QjtBQUNEOztBQUNELFNBQU9ELE9BQVA7QUFDRCxDQU5EOztBQVFBLE1BQU1FLEtBQUssR0FBRyxDQUFDSixHQUFELEVBQU1DLE9BQU8sR0FBRyxFQUFoQixLQUF1QjtBQUNuQyxNQUFJLENBQUNELEdBQUwsRUFBVSxNQUFNLGtCQUFOO0FBQ1YsTUFBSSxPQUFPQSxHQUFQLEtBQWUsUUFBbkIsRUFBNkIsTUFBTSxrQkFBTjtBQUM3QixNQUFJLENBQUNKLEVBQUUsQ0FBQ1MsVUFBSCxDQUFjTCxHQUFkLENBQUwsRUFBeUIsTUFBTSxjQUFOO0FBRXpCLFFBQU1FLE9BQU8sR0FBR0gsVUFBVSxDQUFDQyxHQUFELEVBQU1DLE9BQU4sQ0FBMUI7QUFDQSxTQUFPSCxTQUFTLENBQUNJLE9BQUQsQ0FBaEI7QUFDRCxDQVBEOztBQVNBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUJILEtBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuY29uc3QgZXhlY0FzeW5jID0gcmVxdWlyZShcIi4uL2V4ZWNBc3luY1wiKTtcblxuY29uc3QgZ2V0Q29tbWFuZCA9IChwZGYsIG9wdGlvbnMpID0+IHtcbiAgbGV0IGNvbW1hbmQgPSBcImxwIFwiICsgcGRmO1xuICBpZiAob3B0aW9ucy5wcmludGVyKSB7XG4gICAgY29tbWFuZCArPSBcIiAtZCBcIiArIG9wdGlvbnMucHJpbnRlcjtcbiAgfVxuICByZXR1cm4gY29tbWFuZDtcbn07XG5cbmNvbnN0IHByaW50ID0gKHBkZiwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGlmICghcGRmKSB0aHJvdyBcIk5vIFBERiBzcGVjaWZpZWRcIjtcbiAgaWYgKHR5cGVvZiBwZGYgIT09IFwic3RyaW5nXCIpIHRocm93IFwiSW52YWxpZCBQREYgbmFtZVwiO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGRmKSkgdGhyb3cgXCJObyBzdWNoIGZpbGVcIjtcblxuICBjb25zdCBjb21tYW5kID0gZ2V0Q29tbWFuZChwZGYsIG9wdGlvbnMpO1xuICByZXR1cm4gZXhlY0FzeW5jKGNvbW1hbmQpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBwcmludDtcbiJdfQ==